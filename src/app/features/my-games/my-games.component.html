<div class="my-games-page">
  <div class="page-header">
    <h2>Minha Cole√ß√£o</h2>
    <button class="btn-primary" (click)="openCreateForm()">+ Adicionar Jogo</button>
  </div>

  <!-- Filtros - Linha 1: Busca por t√≠tulo -->
  <div class="search-bar">
    <input
      type="text"
      class="search-input"
      [class.search-input-active]="searchTitle().length > 0"
      placeholder="Buscar jogo por t√≠tulo..."
      [value]="searchTitle()"
      (input)="updateSearchTitle($any($event.target).value)"
      (keyup.enter)="onSearch()">
    <button class="btn-search" (click)="onSearch()">üîç Buscar</button>
    <button
      class="btn-clear"
      *ngIf="isFilterActive()"
      (click)="clearFilters()"
      title="Limpar todos os filtros">
      ‚úï Limpar Filtros
    </button>
  </div>

  <!-- Filtros - Linha 2: Plataforma e Loja -->
  <div class="filters-row">
    <div class="filter-group">
      <label for="platform-filter">Plataforma:</label>
      <select
        id="platform-filter"
        class="filter-select"
        [value]="selectedPlatformId()"
        (change)="updatePlatformFilter(+$any($event.target).value); onSearch()">
        <option value="0">Todas as Plataformas</option>
        <option *ngFor="let platform of platforms()" [value]="platform.id">
          {{ platform.name }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <label for="source-filter">Loja/Origem:</label>
      <select
        id="source-filter"
        class="filter-select"
        [value]="selectedSourceId()"
        (change)="updateSourceFilter(+$any($event.target).value); onSearch()">
        <option value="0">Todas as Lojas</option>
        <option *ngFor="let source of sources()" [value]="source.id">
          {{ source.name }}
        </option>
      </select>
    </div>
  </div>

  <!-- Badge de filtros ativos -->
  <div class="filter-indicator" *ngIf="isFilterActive()">
    <span class="filter-badge">
      üîç Filtros ativos: {{ activeFiltersText() }}
      <button class="filter-badge-close" (click)="clearFilters()">‚úï</button>
    </span>
  </div>

  <div class="loading" *ngIf="isLoading()">Carregando...</div>

  <app-table-list
    *ngIf="!isLoading()"
    [columns]="columns"
    [data]="myGamesData()"
    [actions]="actions"
    (actionClick)="handleAction($event)">
  </app-table-list>

  <div class="pagination" *ngIf="totalPages() > 1">
    <button
      class="btn-page"
      [disabled]="currentPage() === 0"
      (click)="onPageChange(currentPage() - 1)">
      ‚Üê Anterior
    </button>

    <span class="page-info">
      P√°gina {{ currentPage() + 1 }} de {{ totalPages() }}
      ({{ totalElements() }} {{ isFilterActive() ? 'resultado(s) encontrado(s)' : 'jogo(s) na cole√ß√£o' }})
    </span>

    <button
      class="btn-page"
      [disabled]="currentPage() >= totalPages() - 1"
      (click)="onPageChange(currentPage() + 1)">
      Pr√≥xima ‚Üí
    </button>
  </div>

  <!-- Modal de Formul√°rio -->
  <div class="modal-overlay" *ngIf="showForm()" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <app-my-game-form
        [myGame]="editingMyGame()"
        (save)="onFormSubmit($event)"
        (cancel)="closeForm()">
      </app-my-game-form>
    </div>
  </div>
</div>

<!-- Toast Notification -->
<app-toast-notification
  [message]="toastMessage()"
  [type]="toastType()"
  [(show)]="showToast">
</app-toast-notification>